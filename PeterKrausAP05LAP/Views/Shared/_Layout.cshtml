@using PeterKrausAP05LAP.Tools;

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Meine ASP.NET-Anwendung</title>
    @Styles.Render("~/Content/css")
    <link href="~/Content/toastr.css" rel="stylesheet" />
    <link href="~/Content/custom.css" rel="stylesheet" />
    @Scripts.Render("~/bundles/modernizr")

</head>
<body>

    @*List<ToastMessage>
        toastMessages = new List<ToastMessage>();

            toastMessages.Add(new ToastMessage("Hello", "This is a test", Toasttype.info));
            toastMessages.Add(new ToastMessage("I have Apples", "This is a warning", Toasttype.warning));
            ViewBag.toasts = toastMessages;*@

    @{
        List<ToastMessage> allToasts = new List<ToastMessage> {
        new ToastMessage("test", "passt", Toasttype.info),
        new ToastMessage("test", "passt", Toasttype.warning),
        new ToastMessage("test", "passt", Toasttype.error),
        new ToastMessage("test", "passt", Toasttype.success)
    };
        if (ViewBag.toasts != null)
        {
            allToasts = ViewBag.toasts;

        }
        else
        {
            allToasts = new List<ToastMessage>();
        }
        // if the User Want to Login he will be informed
        bool userLoggedIn = false;
        if (TempData.ContainsKey("justLoggedIn"))
        {
            userLoggedIn = (bool)TempData["justLoggedIn"];
        }
        if (userLoggedIn)
        {
            string email = (string)TempData["userEmail"];
            allToasts.Add( new ToastMessage(
                    "WIllkommen zurück " + email + "!",
                    "Sie wurden erfolgreich eingeloggt",
                    Toasttype.success));
        }
        // if the User Want to Logout he will be informed
        bool userLoggedOut = false;
        if (TempData.ContainsKey("justLoggedOut"))
        {
            userLoggedOut = (bool)TempData["justLoggedOut"];
        }
        if (userLoggedOut)
        {
            allToasts.Add( new ToastMessage(
                    "Aufwiedersehen",
                    "Sie wurden erfolgreich ausgeloggt!",
                    Toasttype.success));
        }
    }



    <script type="text/javascript">
    function myFunction(toastType, titel, message) {

        if (toastType == "success") {
        toastr.success(message, titel);

        } else if (toastType == "error") {
        toastr.error(message, titel);

        } else if (toastType == "info") {
        toastr.info(message, titel);

        } else if (toastType == "warning") {
        toastr.warning(message, titel);

        } else {

        }
    }

window.onload = function () {
        @foreach (ToastMessage item in allToasts)
        {
    <text>myFunction("@item.Type.ToString()", "@item.Title", "@item.Message");</text>
        }
};


    </script>



    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                @Html.ActionLink("Anwendungsname", "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li>@Html.ActionLink("Startseite", "Index", "Home")</li>
                    <li>@Html.ActionLink("Laden", "ShopPage", "Shop")</li>
                    <li>@Html.ActionLink("Informationen", "About", "Home")</li>
                    <li>@Html.ActionLink("Kontakt", "Contact", "Home")</li>

                    @if (User.Identity.IsAuthenticated)
                    {
                        <li>@Html.ActionLink("Logout", "Logout", "Account")</li>
                    }
                    else
                    {
                        <li>@Html.ActionLink("Login", "Login", "Account")</li>
                        <li>@Html.ActionLink("Register", "Registratur", "Account")</li>
                    }

                    @* This Line was Only used for Importing new Lines *@
                    <li>@Html.ActionLink("Import Files", "Importer", "Home")</li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>@Html.ActionLink("Cart", "ShopCart", "Shop")</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container body-content">
        @RenderBody()
        <hr />
        <footer>
            <p>&copy; @DateTime.Now.Year - Meine ASP.NET-Anwendung</p>
        </footer>
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    <script src="~/Scripts/toastr.js"></script>
    @RenderSection("scripts", required: false)
</body>
</html>
